<!DOCTYPE html>
<html lang="sk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspirace | Aibility</title>
    <meta name="description" content="Inšpiratívne reklamy a copy pre kreatívne kampane">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/logo/logo-icon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:wght@400;500;600;700&family=Hedvig+Letters+Serif:opsz@12..24&display=swap"
        rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/iconoir.css">

    <style>
        /* Header Overrides/Styles based on pages_ds */
        /* Note: Basic header styles are already in css/styles.css, we just need to ensure correct layout */
        /* Header - Floating Pill Style */


        /* Pill Tabs Styling */
        .tabs-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .inspirace-tabs {
            display: inline-flex;
            background: var(--color-bg-primary);
            margin-top: 16px;
            padding: 8px;
            /* Small padding around the pills */
            border-radius: var(--radius-full);
            /* Fully rounded container */
            gap: 0;
            /* No gap between items purely, controlled by padding/margin if needed */
        }

        /* Remove old pseudo-element */
        .inspirace-tabs::after {
            display: none;
        }

        .inspirace-tab {
            display: flex;
            align-items: center;
            justify-content: center;
            /* Wider padding for pill shape */
            padding: var(--space-3) var(--space-2);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--color-text-secondary);
            background: transparent;
            border: none;
            border-radius: var(--radius-full);
            /* Rounded pills */
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
            min-width: 100px;
            /* Optional: ensures min width for labels */
        }

        .inspirace-tab i {
            display: none;
            /* Hide icons based on reference image */
        }

        .inspirace-tab:hover {
            color: var(--color-text-primary);
        }

        .inspirace-tab.active {
            background: white;
            color: var(--color-text-primary);
            box-shadow: var(--shadow-sm);
            font-weight: var(--font-semibold);
        }

        .inspirace-tab.active::after {
            display: none;
            /* Remove underline */
        }

        /* Column Selector - Inline with tabs */
        .column-selector {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-top: 16px;
        }

        .column-selector__label {
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--color-text-secondary);
            white-space: nowrap;
        }

        .column-selector__buttons {
            display: flex;
            gap: var(--space-2);
            background: var(--color-bg-primary);
            padding: var(--space-1);
            border-radius: var(--radius-full);
        }

        .column-selector__btn {
            padding: var(--space-2) var(--space-4);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--color-text-secondary);
            background: transparent;
            border: none;
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all var(--transition-fast);
            min-width: 40px;
        }

        .column-selector__btn:hover {
            color: var(--color-text-primary);
            background: var(--color-bg-card);
        }

        .column-selector__btn.active {
            background: white;
            color: var(--color-text-primary);
            box-shadow: var(--shadow-sm);
            font-weight: var(--font-semibold);
        }

        @media (max-width: 768px) {
            .tabs-container {
                flex-direction: column;
                gap: var(--space-4);
            }

            .column-selector {
                margin-top: 0;
            }
        }

        /* Masonry Grid for Ads - Dynamic column-count */
        .masonry-grid {
            column-count: var(--grid-columns, 5);
            column-gap: var(--space-8);
            padding: var(--space-8) 0;
        }

        @media (max-width: 1200px) {
            .masonry-grid {
                column-count: var(--grid-columns-mobile, 3);
            }
        }

        @media (max-width: 768px) {
            .masonry-grid {
                column-count: var(--grid-columns-mobile, 2);
            }
        }

        @media (max-width: 480px) {
            .masonry-grid {
                column-count: 1;
            }
        }

        .masonry-item {
            break-inside: avoid;
            margin-bottom: var(--space-4);
            border-radius: var(--radius-lg);
            overflow: hidden;
            background: var(--color-bg-card);
            box-shadow: var(--shadow-sm);
            transition: transform var(--transition-base), box-shadow var(--transition-base);
        }

        .masonry-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .masonry-item img {
            width: 100%;
            height: auto;
            display: block;
            cursor: pointer;
        }

        /* Image Modal */
        .image-modal {
            position: fixed;
            inset: 0;
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity var(--transition-slow);
        }

        .image-modal.is-open {
            display: flex;
            opacity: 1;
        }

        .image-modal__overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px);
            cursor: pointer;
        }

        .image-modal__container {
            position: relative;
            z-index: 1;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-modal__image {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: var(--radius-lg);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .image-modal__close {
            position: absolute;
            top: -48px;
            right: 0;
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
            backdrop-filter: blur(10px);
        }

        .image-modal__close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .image-modal__prev,
        .image-modal__next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 56px;
            height: 56px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
            backdrop-filter: blur(10px);
            font-size: 24px;
        }

        .image-modal__prev {
            left: -72px;
        }

        .image-modal__next {
            right: -72px;
        }

        .image-modal__prev:hover,
        .image-modal__next:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        .image-modal__prev:disabled,
        .image-modal__next:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .image-modal__prev,
            .image-modal__next {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }

            .image-modal__prev {
                left: var(--space-2);
            }

            .image-modal__next {
                right: var(--space-2);
            }

            .image-modal__close {
                top: var(--space-2);
                right: var(--space-2);
            }
        }

        /* Copy Section */


        .copy-grid {
            column-count: var(--grid-columns, 5);
            column-gap: var(--space-8);
            padding: var(--space-8) 0;
        }

        @media (max-width: 1200px) {
            .copy-grid {
                column-count: var(--grid-columns-mobile, 3);
            }
        }

        @media (max-width: 768px) {
            .copy-grid {
                column-count: var(--grid-columns-mobile, 2);
            }
        }

        @media (max-width: 480px) {
            .copy-grid {
                column-count: 1;
            }
        }

        .copy-card {
            background: #F8FAFC;
            border: none;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            break-inside: avoid;
            margin-bottom: var(--space-4);
            transition: all var(--transition-base);
        }

        .copy-card:hover {
            box-shadow: var(--shadow-md);
        }

        .copy-card__number {
            font-size: var(--text-xs);
            font-weight: var(--font-semibold);
            color: var(--color-accent-primary);
            margin-bottom: var(--space-2);
        }

        .copy-card__text {
            font-family: var(--font-family-headings);
            font-size: var(--text-lg);
            line-height: var(--leading-snug);
            color: var(--color-text-primary);
        }

        /* Section visibility */
        .section-content {
            display: none;
        }

        .section-content.active {
            display: block;
        }

        /* Hero header */
        .inspirace-hero {
            text-align: center;
            padding: var(--space-12) 0 0;
            margin-top: 5%;
        }

        .inspirace-hero__title {
            font-family: var(--font-family-headings);
            font-size: var(--text-5xl);
            font-weight: 400;
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
        }

        .inspirace-hero__subtitle {
            font-size: var(--text-sm);
            color: var(--color-text-tertiary);
        }

        /* Tabs container - tabs on left, column selector on right */
        .tabs-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header__container container">
            <div class="header__left">
                <!-- Mobile hamburger button -->
                <button type="button" class="header__menu-toggle" aria-label="Toggle menu" aria-expanded="false">
                    <i class="iconoir-menu"></i>
                </button>

                <!-- Logo -->
                <a href="/" class="header__logo" aria-label="Aibility Logo">
                    <img src="assets/logo/Aibility_logo_vector.svg" alt="Aibility" class="header__logo-img"
                        width="120" height="40" fetchpriority="high">
                </a>
            </div>

            <!-- Desktop Navigation -->
            <nav class="header__nav" aria-label="Main navigation">
                <ul class="header__nav-list">
                    <li><a href="https://brain.aibility.cz" class="header__nav-item">Otevřít Aibility Brain</a></li>
                </ul>
            </nav>
        </div>

        <!-- Mobile Navigation Menu -->
        <nav class="header__mobile-nav" aria-label="Mobile navigation" data-state="closed">
            <ul class="header__mobile-nav-list">
                <li><a href="https://brain.aibility.cz" class="header__nav-item">Otevřít Aibility Brain</a></li>
            </ul>
        </nav>
    </header>

    <main>

        <!-- Hero -->
        <section class="inspirace-hero">
            <div class="container">
                <h1 class="inspirace-hero__title">Inspirace</h1>

                <!-- Centered Tabs (Pill Style) with Column Selector -->
                <div class="tabs-container">
                    <div class="inspirace-tabs">
                        <button class="inspirace-tab active" data-tab="reklamy">
                            Reklamy
                        </button>
                        <button class="inspirace-tab" data-tab="copy">
                            Copy
                        </button>
                    </div>
                    <div class="column-selector">
                        <div class="column-selector__buttons">
                            <button class="column-selector__btn" data-columns="2">2</button>
                            <button class="column-selector__btn" data-columns="3">3</button>
                            <button class="column-selector__btn" data-columns="4">4</button>
                            <button class="column-selector__btn active" data-columns="5">5</button>
                            <button class="column-selector__btn" data-columns="6">6</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reklamy Section -->
        <section id="reklamy" class="section-content active">
            <div class="container">
                <div class="masonry-grid" id="reklamy-grid">
                    <!-- Dynamically loaded from API -->
                </div>
            </div>
        </section>

        <!-- Copy Section -->
        <section id="copy" class="section-content copy-section">
            <div class="container">
                <div class="copy-grid" id="copy-grid">
                    <!-- Dynamically loaded from API -->
                </div>
            </div>
        </section>
    </main>

    <!-- Image Modal -->
    <div id="image-modal" class="image-modal" role="dialog" aria-label="Fullscreen image" aria-hidden="true">
        <div class="image-modal__overlay"></div>
        <div class="image-modal__container">
            <button class="image-modal__close" aria-label="Close modal">
                <i class="iconoir-cancel"></i>
            </button>
            <img class="image-modal__image" src="" alt="">
            <button class="image-modal__prev" aria-label="Previous image">
                <i class="iconoir-arrow-left"></i>
            </button>
            <button class="image-modal__next" aria-label="Next image">
                <i class="iconoir-arrow-right"></i>
            </button>
        </div>
    </div>

    <script>
        // Global state for images and modal
        let allImages = [];
        let currentImageIndex = 0;

        // Load reklamy images dynamically
        async function loadReklamy() {
            const grid = document.getElementById('reklamy-grid');
            try {
                const response = await fetch('/api/reklamy');
                const images = await response.json();
                allImages = images;

                grid.innerHTML = images.map((img, index) => `
                    <div class="masonry-item" data-image-index="${index}">
                        <img src="reklamy/${img}" alt="Ad inspiration" loading="lazy" data-src="reklamy/${img}">
                    </div>
                `).join('');

                // Make images clickable
                grid.querySelectorAll('.masonry-item img').forEach((img, index) => {
                    img.addEventListener('click', () => openImageModal(index));
                });

                // Initialize scroll animations
                initScrollAnimations();
            } catch (error) {
                console.error('Error loading reklamy:', error);
                grid.innerHTML = '<p>Failed to load images</p>';
            }
        }

        // Scroll animations using Intersection Observer
        function initScrollAnimations() {
            const items = document.querySelectorAll('.masonry-item');
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            if (prefersReducedMotion) {
                // Skip animations if user prefers reduced motion
                items.forEach(item => {
                    item.classList.add('is-visible');
                });
                return;
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in-on-scroll', 'is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            items.forEach((item, index) => {
                item.style.transitionDelay = `${(index % 6) * 0.1}s`;
                observer.observe(item);
            });
        }

        // Image Modal Functions
        function openImageModal(index) {
            currentImageIndex = index;
            const modal = document.getElementById('image-modal');
            const modalImage = modal.querySelector('.image-modal__image');
            const imageSrc = allImages[index];
            
            modalImage.src = `reklamy/${imageSrc}`;
            modalImage.alt = `Ad inspiration ${index + 1}`;
            
            modal.classList.add('is-open');
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
            
            updateModalButtons();
        }

        function closeImageModal() {
            const modal = document.getElementById('image-modal');
            modal.classList.remove('is-open');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        }

        function showNextImage() {
            if (currentImageIndex < allImages.length - 1) {
                openImageModal(currentImageIndex + 1);
            }
        }

        function showPrevImage() {
            if (currentImageIndex > 0) {
                openImageModal(currentImageIndex - 1);
            }
        }

        function updateModalButtons() {
            const prevBtn = document.querySelector('.image-modal__prev');
            const nextBtn = document.querySelector('.image-modal__next');
            
            prevBtn.disabled = currentImageIndex === 0;
            nextBtn.disabled = currentImageIndex === allImages.length - 1;
        }

        // Modal event listeners
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('image-modal');
            const overlay = modal.querySelector('.image-modal__overlay');
            const closeBtn = modal.querySelector('.image-modal__close');
            const prevBtn = modal.querySelector('.image-modal__prev');
            const nextBtn = modal.querySelector('.image-modal__next');

            overlay.addEventListener('click', closeImageModal);
            closeBtn.addEventListener('click', closeImageModal);
            prevBtn.addEventListener('click', showPrevImage);
            nextBtn.addEventListener('click', showNextImage);

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (!modal.classList.contains('is-open')) return;

                if (e.key === 'Escape') {
                    closeImageModal();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });
        });

        // Load copy headlines dynamically
        async function loadCopy() {
            const grid = document.getElementById('copy-grid');
            try {
                const response = await fetch('/api/copy');
                const headlines = await response.json();

                grid.innerHTML = headlines.map((text, index) => `
                    <div class="copy-card">
                        <span class="copy-card__number">#${index + 1}</span>
                        <p class="copy-card__text">${text}</p>
                    </div>
                `).join('');

                // Initialize scroll animations for copy cards
                initCopyScrollAnimations();
            } catch (error) {
                console.error('Error loading copy:', error);
                grid.innerHTML = '<p>Failed to load headlines</p>';
            }
        }

        // Scroll animations for copy cards
        function initCopyScrollAnimations() {
            const cards = document.querySelectorAll('.copy-card');
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            if (prefersReducedMotion) {
                cards.forEach(card => {
                    card.classList.add('is-visible');
                });
                return;
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in-on-scroll', 'is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            cards.forEach((card, index) => {
                card.style.transitionDelay = `${(index % 6) * 0.1}s`;
                observer.observe(card);
            });
        }

        // Tab switching functionality
        document.querySelectorAll('.inspirace-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.inspirace-tab').forEach(t => t.classList.remove('active'));
                // Add active class to clicked tab
                tab.classList.add('active');

                // Hide all sections
                document.querySelectorAll('.section-content').forEach(s => s.classList.remove('active'));
                // Show selected section
                const targetId = tab.dataset.tab;
                document.getElementById(targetId).classList.add('active');
            });
        });

        // Column Selector Functions - Update both grids
        function updateGridColumns(columns) {
            const reklamyGrid = document.getElementById('reklamy-grid');
            const copyGrid = document.getElementById('copy-grid');
            const width = window.innerWidth;
            
            // Update columns based on viewport width
            if (width <= 480) {
                // Mobile: always 1 column
                const colValue = '1';
                if (reklamyGrid) {
                    reklamyGrid.style.setProperty('--grid-columns', colValue);
                    reklamyGrid.style.setProperty('--grid-columns-mobile', colValue);
                }
                if (copyGrid) {
                    copyGrid.style.setProperty('--grid-columns', colValue);
                    copyGrid.style.setProperty('--grid-columns-mobile', colValue);
                }
            } else if (width <= 768) {
                // Tablet: max 2 columns
                const colValue = Math.min(columns, 2);
                if (reklamyGrid) {
                    reklamyGrid.style.setProperty('--grid-columns-mobile', colValue);
                }
                if (copyGrid) {
                    copyGrid.style.setProperty('--grid-columns-mobile', colValue);
                }
            } else if (width <= 1200) {
                // Medium: max 3 columns
                const colValue = Math.min(columns, 3);
                if (reklamyGrid) {
                    reklamyGrid.style.setProperty('--grid-columns-mobile', colValue);
                }
                if (copyGrid) {
                    copyGrid.style.setProperty('--grid-columns-mobile', colValue);
                }
            } else {
                // Desktop: use selected columns
                if (reklamyGrid) {
                    reklamyGrid.style.setProperty('--grid-columns', columns);
                    reklamyGrid.style.setProperty('--grid-columns-mobile', columns);
                }
                if (copyGrid) {
                    copyGrid.style.setProperty('--grid-columns', columns);
                    copyGrid.style.setProperty('--grid-columns-mobile', columns);
                }
            }

            // Save to localStorage
            localStorage.setItem('inspirace-columns', columns);
        }

        function loadColumnPreference() {
            const saved = localStorage.getItem('inspirace-columns');
            if (saved) {
                const columns = parseInt(saved, 10);
                if (columns >= 2 && columns <= 6) {
                    updateGridColumns(columns);
                    // Update active button
                    document.querySelectorAll('.column-selector__btn').forEach(btn => {
                        btn.classList.toggle('active', parseInt(btn.dataset.columns, 10) === columns);
                    });
                }
            } else {
                // Set default to 5 columns if no preference saved
                updateGridColumns(5);
            }
        }

        // Column selector event listeners
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.column-selector__btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active from all buttons
                    document.querySelectorAll('.column-selector__btn').forEach(b => b.classList.remove('active'));
                    // Add active to clicked button
                    btn.classList.add('active');
                    // Update grid
                    const columns = parseInt(btn.dataset.columns, 10);
                    updateGridColumns(columns);
                });
            });

            // Load saved preference
            loadColumnPreference();

            // Handle window resize for mobile columns
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    const saved = localStorage.getItem('inspirace-columns');
                    if (saved) {
                        const columns = parseInt(saved, 10);
                        updateGridColumns(columns);
                    }
                }, 250);
            });
        });

        // Load content on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadReklamy();
            loadCopy();
        });
    </script>
</body>

</html>